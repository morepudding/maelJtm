<mxfile host="Electron" modified="2024-05-23T00:00:00.000Z" agent="Mozilla/5.0" version="21.3.7" type="device">
  <diagram id="arch-v2" name="BricoLoc - V2">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1654" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- EXTERNAL -->
        <mxCell id="10" value="Internet &amp; Clients" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;startSize=40;fontStyle=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="900" height="180" as="geometry" />
        </mxCell>
        <mxCell id="11" value="Navigateurs Web&#10;(B2C, B2B)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="10">
          <mxGeometry x="80" y="70" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="12" value="App Mobile&#10;(Loueurs/P2P)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="10">
          <mxGeometry x="370" y="70" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="13" value="Partenaires API&#10;(Marque Blanche)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="10">
          <mxGeometry x="660" y="70" width="160" height="70" as="geometry" />
        </mxCell>

        <!-- CDN -->
        <mxCell id="20" value="CDN Global&#10;&amp; Edge Caching" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;shadow=1;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="400" y="270" width="180" height="100" as="geometry" />
        </mxCell>

        <!-- OVHCLOUD -->
        <mxCell id="30" value="OVHcloud (Hébergement Souverain / Green IT)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;startSize=40;fontStyle=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="40" y="420" width="900" height="880" as="geometry" />
        </mxCell>

        <!-- OVH PUBLIC -->
        <mxCell id="31" value="Réseau Public / Périmètre Sécurité" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#c0c0c0;startSize=30;fontSize=14;fontStyle=1;" vertex="1" parent="30">
          <mxGeometry x="40" y="60" width="820" height="160" as="geometry" />
        </mxCell>
        <mxCell id="311" value="Pare-Feu WAF&#10;&amp; Anti-DDoS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="31">
          <mxGeometry x="150" y="60" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="312" value="Managed&#10;Load Balancer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="31">
          <mxGeometry x="510" y="60" width="160" height="70" as="geometry" />
        </mxCell>

        <!-- OVH VRACK -->
        <mxCell id="32" value="vRack (Réseau Privé Backend &amp; Isolé)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#c0c0c0;startSize=30;fontSize=14;fontStyle=1;" vertex="1" parent="30">
          <mxGeometry x="40" y="250" width="820" height="600" as="geometry" />
        </mxCell>

        <!-- ZONE MKS -->
        <mxCell id="321" value="Zone Computing (Managed Kubernetes Service)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;startSize=30;fontSize=12;fontStyle=1;" vertex="1" parent="32">
          <mxGeometry x="30" y="50" width="760" height="320" as="geometry" />
        </mxCell>
        <mxCell id="3211" value="API Gateway&#10;(Spring Cloud GW)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontStyle=1;fontSize=13;" vertex="1" parent="321">
          <mxGeometry x="40" y="130" width="160" height="70" as="geometry" />
        </mxCell>

        <!-- MICROSERVICES -->
        <mxCell id="3212" value="Grappe de Microservices (Spring Boot 3 / Java 21)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#cccccc;startSize=30;dashed=1;fontSize=12;fontStyle=1;" vertex="1" parent="321">
          <mxGeometry x="250" y="50" width="480" height="240" as="geometry" />
        </mxCell>
        <mxCell id="ms1" value="Catalogue" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1565c0;fontSize=13;" vertex="1" parent="3212">
          <mxGeometry x="30" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ms2" value="Réservation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1565c0;fontSize=13;" vertex="1" parent="3212">
          <mxGeometry x="180" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ms3" value="P2P (Escrow)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1565c0;fontSize=13;" vertex="1" parent="3212">
          <mxGeometry x="330" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ms4" value="Stocks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1565c0;fontSize=13;" vertex="1" parent="3212">
          <mxGeometry x="100" y="150" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ms5" value="Tenant (MB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1565c0;fontSize=13;" vertex="1" parent="3212">
          <mxGeometry x="260" y="150" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- ZONE DATA -->
        <mxCell id="322" value="Zone Bases de Données &amp; Évènements" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;startSize=30;fontSize=12;fontStyle=1;" vertex="1" parent="32">
          <mxGeometry x="30" y="400" width="520" height="170" as="geometry" />
        </mxCell>
        <mxCell id="3221" value="PostgreSQL&#10;(HA / Multi-Tenant)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;shadow=1;fontSize=12;" vertex="1" parent="322">
          <mxGeometry x="40" y="50" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="3222" value="Redis&#10;(Cache/Sessions)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;shadow=1;fontSize=12;" vertex="1" parent="322">
          <mxGeometry x="200" y="50" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="3223" value="RabbitMQ&#10;(Bus AMQP)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;shadow=1;fontSize=12;" vertex="1" parent="322">
          <mxGeometry x="360" y="50" width="120" height="90" as="geometry" />
        </mxCell>

        <!-- ZONE STORAGE -->
        <mxCell id="323" value="Zone Fichiers" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;startSize=30;fontSize=12;fontStyle=1;" vertex="1" parent="32">
          <mxGeometry x="580" y="400" width="210" height="170" as="geometry" />
        </mxCell>
        <mxCell id="3231" value="S3 Object Storage&#10;(Médias BricoLoc)" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;shadow=1;fontSize=12;" vertex="1" parent="323">
          <mxGeometry x="30" y="50" width="150" height="100" as="geometry" />
        </mxCell>

        <!-- TIERS -->
        <mxCell id="40" value="Systèmes Tiers / SaaS / On-Premise" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;startSize=40;fontStyle=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1000" y="420" width="280" height="880" as="geometry" />
        </mxCell>
        <mxCell id="41" value="Azure AD&#10;(SSO BricoLoc)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="40">
          <mxGeometry x="60" y="100" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="42" value="SAP Business One&#10;(ERP Interne)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="40">
          <mxGeometry x="60" y="300" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="43" value="Stripe&#10;(Paiement &amp; Connect)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="40">
          <mxGeometry x="60" y="500" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="44" value="Serveur SMTP&#10;(Mails transactionnels)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shadow=1;fontSize=14;" vertex="1" parent="40">
          <mxGeometry x="60" y="700" width="160" height="70" as="geometry" />
        </mxCell>


        <!-- EDGES -->
        <!-- Ext to CDN -->
        <mxCell id="e1" edge="1" parent="1" source="10" target="20" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- CDN to WAF -->
        <mxCell id="e2" edge="1" parent="1" source="20" target="311" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- WAF to LB -->
        <mxCell id="e3" edge="1" parent="1" source="311" target="312" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- LB to API GW -->
        <mxCell id="e4" edge="1" parent="1" source="312" target="3211" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- API GW to MS -->
        <mxCell id="e5" edge="1" parent="1" source="3211" target="3212" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- API GW to Azure AD -->
        <mxCell id="e6" value="Authentification" edge="1" parent="1" source="3211" target="41" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;dashed=1;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- MS to DB -->
        <mxCell id="e7" value="JDBC" edge="1" parent="1" source="3212" target="3221" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- MS to Redis -->
        <mxCell id="e8" value="Cache" edge="1" parent="1" source="3212" target="3222" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- MS to RMQ -->
        <mxCell id="e9" value="AMQP" edge="1" parent="1" source="3212" target="3223" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- MS to S3 -->
        <mxCell id="e10" value="API S3" edge="1" parent="1" source="3212" target="3231" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- MS to SAP -->
        <mxCell id="e11" value="VPN IPsec (EDI)" edge="1" parent="1" source="3212" target="42" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- MS to Stripe -->
        <mxCell id="e12" value="API REST" edge="1" parent="1" source="3212" target="43" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- MS to SMTP -->
        <mxCell id="e13" value="SMTP" edge="1" parent="1" source="3212" target="44" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=12;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
